pipeline{
    agent any

    parameters{
     choice(name: 'CHOICES', choices: ['one', 'two', 'three'], description: '') 
    }

    stages{

        stage("clean workspace"){
            steps{
                echo params.CHOICES
                sh "rm -rf ./*"
            }
            
        }

        stage("Git clone"){
            steps{
                sh "git clone https://github.com/StephanLoecher/springboot-backend/"
            }
        }

        stage("build"){
            steps{
                sh """
                pwd
                cd springboot-backend
                pwd
                mvn compile"""
            }
        }

        stage("test"){
            steps{
                sh """
                cd springboot-backend
                mvn test"""
            }
        }

        stage("package"){
            steps{
                sh """
                cd springboot-backend
                mvn package
                """
            }
           
        }
    }

    post{
        always{
            sh "rm -rf ./*"
        }
        success{
            echo "====++++only when successful++++===="
        }
        failure{
            echo "====++++only when failed++++===="
        }
    }
}
